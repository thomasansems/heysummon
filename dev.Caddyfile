{
    auto_https off
}

:3100 {
    route {
        mercure {
            # Publisher/subscriber JWT key (must match MERCURE_JWT_SECRET)
            publisher_jwt {env.MERCURE_JWT_SECRET}
            subscriber_jwt {env.MERCURE_JWT_SECRET}
            
            # Allow anonymous subscribers in dev mode
            anonymous
            
            # Enable subscriptions API for debugging
            subscriptions
            
            # CORS for local development
            cors_origins *
        }
        
        respond /healthz 200
    }
}
