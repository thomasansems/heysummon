# HeySummon Mercure Hub — Development Configuration
# Anonymous disabled; subscribers must use JWT from /api/v1/mercure-token
{
    auto_https off
}

:3426 {
    route {
        mercure {
            publisher_jwt {env.MERCURE_JWT_SECRET}
            subscriber_jwt {env.MERCURE_JWT_SECRET}

            # No anonymous — even in dev, enforce JWT auth
            # anonymous

            # Subscriptions API for debugging
            subscriptions

            # Allow all origins in dev
            cors_origins *
        }

        respond /healthz 200
    }
}
