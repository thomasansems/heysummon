# HeySummon Platform — Environment Configuration
# Copy to .env and fill in values

# ─── Required ───────────────────────────────────────────
# Generate with: openssl rand -hex 32
NEXTAUTH_SECRET=
MERCURE_JWT_SECRET=

# ─── Database ───────────────────────────────────────────
# SQLite (default, for dev/small deployments):
# DATABASE_URL=file:./prisma/heysummon.db
#
# PostgreSQL (recommended for production):
# DATABASE_URL=postgresql://heysummon:PASSWORD@localhost:5432/heysummon
#
# Docker Compose auto-configures PostgreSQL — no DATABASE_URL needed.

# ─── Auth Methods ───────────────────────────────────────
# Toggle login methods (form login works out of the box, no external services)
ENABLE_FORM_LOGIN=true

# Allow multiple users to register (default: false — only first user can sign up)
# ALLOW_REGISTRATION=true
ENABLE_MAGIC_LINK_LOGIN=false
ENABLE_GOOGLE_LOGIN=false
ENABLE_GITHUB_LOGIN=false

# OAuth credentials (only needed if enabled above)
GITHUB_ID=
GITHUB_SECRET=
GOOGLE_ID=
GOOGLE_SECRET=

# Magic link (only needed if ENABLE_MAGIC_LINK_LOGIN=true)
# LOOPS_API_KEY=
# LOOPS_MAGIC_LINK_ID=

# ─── URLs ───────────────────────────────────────────────
NEXTAUTH_URL=http://localhost:3425

# Public URL of this instance (used by health check and API responses)
# Set this to your tunnel URL (e.g. https://heysummon.example.com)
HEYSUMMON_PUBLIC_URL=http://localhost:3000

# Internal Mercure URL (platform → Mercure, never exposed externally)
# Only change if not using Docker Compose
MERCURE_HUB_URL=http://localhost:3426/.well-known/mercure

# ─── Mercure Security ──────────────────────────────────
# Allowed CORS origins for Mercure (comma-separated in some setups)
MERCURE_CORS_ORIGINS=https://cloud.heysummon.ai

# ─── Docker ─────────────────────────────────────────────
# DB_PASSWORD=       # PostgreSQL password (default: heysummon_dev)
# GUARD_PORT=3425  # Local dev default (3435 for CLI, 3445 for Docker)

# ─── Content Safety Guard (Ed25519 Signing) ─────────────
# Generate with: npx tsx scripts/generate-guard-keys.ts
# Docker Compose auto-generates keys on first `docker compose up`.
#
# Guard private key (64 bytes hex) — only needed on the Guard service
GUARD_SIGNING_KEY=
# Guard public key (32 bytes hex) — only needed on the Platform service
GUARD_PUBLIC_KEY=
# Set to "true" to reject all requests without a valid Guard receipt
REQUIRE_GUARD=true

# ─── Connectivity ─────────────────────────────────────
# Method: cloudflare, tailscale, ngrok, or direct (default)
# Use Docker Compose profiles: docker compose --profile cloudflare up -d
CONNECTIVITY_METHOD=direct

# Cloudflare Tunnel (--profile cloudflare)
# CLOUDFLARE_TUNNEL_TOKEN=

# Tailscale Funnel (--profile tailscale)
# TAILSCALE_AUTHKEY=

# Ngrok (--profile ngrok)
# NGROK_AUTHTOKEN=
# NGROK_DOMAIN=            # Optional custom domain (paid plans)

# Edition: "community" (default, self-hosted) or "cloud" (managed) 
HEYSUMMON_EDITION=community

# Data retention — auto-delete expired/closed requests and audit logs older than X days
# Default: not set = unlimited (nothing is deleted automatically)
# HEYSUMMON_RETENTION_DAYS=90

# Port and URL settings for development (override in production .env).
# If using Docker and not the development version, then default port would be 3445
PORT=3425